<div (click)="onClose()" class="modal-primary">
  <div (click)="$event.stopPropagation()" class="modal-content">

    <div class="modal-header">
      <h2 class="modal-title">Recuperação de Senha</h2>
      <button (click)="onClose()" class="btn-primary close-btn">
        <span class="material-icons">close</span>
      </button>
    </div>

    <div class="modal-body">

      <div *ngIf="!isEmailSent && !isCodeSent" class="form-group">
        <input
          (keydown.enter)="email && sendEmail()"
          [(ngModel)]="email"
          placeholder="Email"
          type="text"
        />
      </div>

      <div *ngIf="isEmailSent && !isCodeSent" class="form-group">
        <input
          (keydown.enter)="code && sendCode()"
          [(ngModel)]="code"
          placeholder="Código recebido no Email"
          type="text"
        />
      </div>

      <div *ngIf="isEmailSent && isCodeSent">
        <div class="form-group">
          <input
            (keydown.enter)="newPassword && confirmNewPassword && updatePassword()"
            [(ngModel)]="newPassword"
            placeholder="Nova Senha"
            type="password"
          />
        </div>
        <div class="form-group">
          <input
            (keydown.enter)="newPassword && confirmNewPassword && updatePassword()"
            [(ngModel)]="confirmNewPassword"
            placeholder="Confirmar Nova Senha"
            type="password"
          />
        </div>
      </div>

    </div>

    <div class="modal-actions">
      <button
        (click)="sendEmail()"
        *ngIf="!isEmailSent && !isCodeSent"
        [disabled]="!email"
        class="btn-primary"
      >
        <span class="btn-text">Enviar Código de Recuperação</span>
      </button>
      <button
        (click)="sendCode()"
        *ngIf="isEmailSent && !isCodeSent"
        [disabled]="!email"
        class="btn-primary"
      >
        <span class="btn-text">Definir Nova Senha</span>
      </button>

      <button
        (click)="updatePassword()"
        *ngIf="isEmailSent && isCodeSent"
        [disabled]="!newPassword || newPassword !== confirmNewPassword"
        class="btn-primary"
      >
        <span class="btn-text">Salvar</span>
      </button>
    </div>

  </div>
</div>
